create sequence if not exists seq_score_summary start 1 increment 1;

create table if not exists tab_score_summary
(
    id       int8      not null,
    created  timestamp not null,
    modified timestamp not null,
    register float8    not null,
    strength float8    not null,
    vitality float8    not null,
    primary key (id)
);

alter table if exists tab_company_user
    add column if not exists score_summary int8,
    add constraint FKbfopu8p24omiplr7lbkrr9gqk foreign key (score_summary) references tab_score_summary;

insert into tab_sys_configuration (id, name, description, configuration, created, modified)
values (20, 'PGFN_PGE_FAT', 'calculate o PGFN+PGE/Fat', '{"best": 0, "worse": 2, "scoreMax": 20}',
        current_timestamp, current_timestamp),
       (21, 'PROT_IDADE', 'calculate of protestos and age', '{"best": 0, "worse": 0.5, "scoreMax": 5}',
        current_timestamp,
        current_timestamp),
       (22, 'VALUE_PROT', 'calculate of valor total dos protestos', '{"best": 0, "worse": 12, "scoreMax": 5}',
        current_timestamp,
        current_timestamp),
       (23, 'PROT_TRAB', 'calculate of the qtde de Qtde de Processos ex-trabalhistas',
        '{"best": 0, "worse": 2, "scoreMax": 15}',
        current_timestamp,
        current_timestamp),
       (24, 'VAL_PROT_TRAB', 'calculate of the valor total trabalhistas', '{"best": 0, "worse": 1, "scoreMax": 15}',
        current_timestamp,
        current_timestamp),
       (25, 'CERTIFICATE', 'calculate of the certidoes', '{"point": -3}',
        current_timestamp, current_timestamp),
       (26, 'BNDES', 'calculate of the BNDES', '{"best": 0, "worse": 1, "scoreMax": 10}',
        current_timestamp,
        current_timestamp),
       (27, 'DEBENTURES', 'calculate of the debenture', '{"best": 0, "worse": 1, "scoreMax": 10}',
        current_timestamp,
        current_timestamp),
       (28, 'CRI', 'calculate of the CRI', '{"best": 0, "worse": 1, "scoreMax": 5}',
        current_timestamp,
        current_timestamp),
       (29, 'CRA', 'calculate of the CRA', '{"best": 0, "worse": 1, "scoreMax": 5}',
        current_timestamp, current_timestamp),
       (30, 'BANK_EXTRACT', 'calculate of the extrato bancario',
        '{"best": 0, "worse": 1, "scoreMax": 10}',
        current_timestamp, current_timestamp),
       (31, 'IR', 'calculate of the IR dos socios', '{"best": 0, "worse": 1, "scoreMax": 10}', current_timestamp,
        current_timestamp),
       (32, 'DEBT_BNDES_COUNT_CURRENT', 'calculate of debt with bndes count',
        '{"best": 0.4, "worse": 0, "scoreMax": 10}',
        current_timestamp,
        current_timestamp),
       (33, 'DEBT_BNDES_VOL_CURRENT', 'calculate of debt with bndes volume', '{"best": 1, "worse": 0, "scoreMax": 10}',
        current_timestamp,
        current_timestamp),
       (34, 'DEBT_IF_VOL', 'calculate of debt with ifs volume', '{"best": 3, "worse": 0, "scoreMax": 60}',
        current_timestamp,
        current_timestamp),
       (35, 'DEBT_IF_COUNT', 'calculate of debt with ifs count', '{"best": 10, "worse": 0, "scoreMax": 20}',
        current_timestamp,
        current_timestamp),
       (36, 'DEBT_BNDES_VOL_PAY', 'calculate of debt with bndes volume pay', '{"best": 1, "worse": 0, "scoreMax": 10}',
        current_timestamp,
        current_timestamp),
       (37, 'DEBT_BNDES_COUNT_PAY', 'calculate of debt with bndes count pay',
        '{"best": 0.4, "worse": 0, "scoreMax": 10}',
        current_timestamp,
        current_timestamp),
       (38, 'DEBT_IF_UPTO_90_DAY', 'calculate of debt with ifs up to 90 day', '{"best": 0, "worse": 1, "scoreMax": 40}',
        current_timestamp,
        current_timestamp),
       (39, 'DEBT_IF_VOL_PL', 'calculate of debt with ifs volume pl', '{"best": 0, "worse": 1, "scoreMax": 40}',
        current_timestamp,
        current_timestamp),
       (40, 'DEBT_IF_VOL_RB', 'calculate of debt with ifs volume raw score', '{"best": 3, "worse": 0, "scoreMax": 60}',
        current_timestamp,
        current_timestamp);
select setval('seq_sys_configuration', 41, true);
